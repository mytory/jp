---
title: '[グーグル アナルリティックス] 阿洲 簡単に 外部 リンクと ダウンロード 追跡すること'
author: 녹풍(綠風, Windgreen)
layout: post
permalink: /archives/749
aktt_notify_twitter:
  - yes
categories:
  - ウェブ解析と検索
tags:
  - Google Analytics
  - Web Analytics
---
ワードプレス プラグイン 中に<a target="_top" href="http://wordpress.org/extend/plugins/google-analyticator/">Google Analyticator</a>という 蟹 ある. <a target="_top" href="http://wordpress.org/support/plugin/google-analyticator">フォーラム</a>度 ある. ここ ある コードを 活用すれば 阿洲 簡単に 追跡を 割 数 ある. (ワード プレスを 使う 人なら 設置して 設定で 活性化して 与えれば 終りだ.)

上 プラグインを ダウンして 圧縮を 解けば external-tracking.js という ファイルも ある. 載せるように 外部 リンクと ダウンロード リンクを 追跡する コードだ. こいつを そのまま ファイルに 入れれば なるのに, コード 二 竝びを 上に 挿入して 与えると する.

プラグイン 設定は jsに 使う 数価 ない だから jsファイルに 含まれて あるの ない ことだ. そのため 受動で 入れて 与えると する ことだ. コードは 簡単だ.

<pre class="brush: javascript; gutter: true; first-line: 1">var analyticsFileTypes = [&#039;pdf&#039;,&#039;zip&#039;,&#039;mp3&#039;];
var analyticsEventTracking = &#039;enabled&#039;;</pre>

こんなに ファイルの マン 上に 入れる. 上の ファイルタイプ 部分に 願う ファイル タイプたちを 入れて 与えれば なる. そして ページに 含む. それでは 終り!

そのため 完成された 結果物は 下と ようだ. 下の コードを コピーして js ファイルを 作れば なる.

<pre class="brush: javascript; gutter: true; first-line: 1">var analyticsFileTypes = [&#039;pdf&#039;,&#039;zip&#039;,&#039;mp3&#039;];
var analyticsEventTracking = &#039;enabled&#039;;

jQuery(document).ready(function() {
  jQuery(&#039;a&#039;).each(function() {
    var a = jQuery(this);
    var href = a.attr(&#039;href&#039;);
    
    // Check if the a tag has a href, if not, stop for the current link
    if ( href == undefined )
      return;
    
    var url = href.replace(&#039;http://&#039;,&#039;&#039;).replace(&#039;https://&#039;,&#039;&#039;);
    var hrefArray = href.split(&#039;.&#039;).reverse();
    var extension = hrefArray[0].toLowerCase();
    var hrefArray = href.split(&#039;/&#039;).reverse();
    var domain = hrefArray[2];
    var downloadTracked = false;
  
     // If the link is a download
    if (jQuery.inArray(extension,analyticsFileTypes) != -1) {
      // Mark the link as already tracked
      downloadTracked = true;
      
      // Add the tracking code
      a.click(function() {
        if ( analyticsEventTracking == &#039;enabled&#039; ) {
          _gaq.push([&#039;_trackEvent&#039;, &#039;Downloads&#039;, extension.toUpperCase(), href]);
        } else
          _gaq.push([&#039;_trackPageview&#039;, analyticsDownloadsPrefix + url]);
      });
    }
    
    // If the link is external
     if ( ( href.match(/^http/) ) && ( !href.match(document.domain) ) && ( downloadTracked == false ) ) {
        // Add the tracking code
      a.click(function() {
        if ( analyticsEventTracking == &#039;enabled&#039; ) {
          _gaq.push([&#039;_trackEvent&#039;, &#039;Outbound Traffic&#039;, href.match(/://(.[^/]+)/)[1], href]);
        } else
          _gaq.push([&#039;_trackPageview&#039;, analyticsOutboundPrefix + url]);
      });
    }
  });
});</pre>