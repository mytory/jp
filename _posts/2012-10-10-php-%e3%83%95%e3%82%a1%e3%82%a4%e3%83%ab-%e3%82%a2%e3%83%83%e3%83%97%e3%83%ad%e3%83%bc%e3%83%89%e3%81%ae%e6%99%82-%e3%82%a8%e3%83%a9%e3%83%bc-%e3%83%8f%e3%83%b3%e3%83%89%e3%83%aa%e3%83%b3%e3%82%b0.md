---
title: '[PHP] ファイル アップロードの時 エラー ハンドリング ソース'
author: 녹풍(綠風, Windgreen)
layout: post
permalink: /archives/277
aktt_notify_twitter:
  - yes
categories:
  - Web server
tags:
  - PHP
---
ファイルを アップロードする 時 エラー ハンドリングは 簡単な ソースでは 気を使うの ない 場合が ある の ようだ.

事実 急な 焚く そのまま &#8216;エラー 出た&#8217;高慢 日 酒庫 どうな 種類の エラー認知まで ソースを 組む 蟹 面倒だ.

そうな 時を のために そのまま エラー ハンドリング ソースを 作った. 必要な 時 掻けば なる のだ.

<pre class="brush:php">//JSON 形式で 結果を リターンする.
if($_FILES[&#039;userfile&#039;][&#039;error&#039;] &gt; 0){
	echo &#039;{result: -1, &#039;;
	//間違い タイプに よって echo &#039;msg: "間違い種類"}&#039;;
	switch ($_FILES[&#039;userfile&#039;][&#039;error&#039;]){
	case 1: echo &#039;msg: "upload_max_filesize 超過"}&#039;;break;
	case 2: echo &#039;msg: "max_file_size 超過"}&#039;;break;
	case 3: echo &#039;msg: "ファイルが 部分だけ アップロードされました."}&#039;;break;
	case 4: echo &#039;msg: "ファイルを 選択して ください."}&#039;;break;
	case 6: echo &#039;msg: "臨時 フォルダが 存在するの ないです."}&#039;;break;
	case 7: echo &#039;msg: "臨時 フォルダに ファイルを 使う 数 ないです. パーミッションを 察して 見てください."}&#039;;break;
	case 8: echo &#039;msg: "拡張に 義解 ファイル アップロードが 中止されました."}&#039;;break;
	}
}</pre>

<pre class="brush:php">//そのまま 結果を 画面に 振り撤く.
if($_FILES[&#039;userfile&#039;][&#039;error&#039;] &gt; 0){
	echo &#039;間違い 発生 : &#039;;
	//間違い タイプに よって echo &#039;間違い種類"}&#039;;
	switch ($_FILES[&#039;userfile&#039;][&#039;error&#039;]){
	case 1: echo &#039;upload_max_filesize 超過&#039;;break;
	case 2: echo &#039;max_file_size 超過&#039;;break;
	case 3: echo &#039;ファイルが 部分だけ アップロードされました.&#039;;break;
	case 4: echo &#039;ファイルを 選択して ください.&#039;;break;
	case 6: echo &#039;臨時 フォルダが 存在するの ないです.&#039;;break;
	case 7: echo &#039;臨時 フォルダに ファイルを 使う 数 ないです. パーミッションを 察して 見てください.&#039;;break;
	case 8: echo &#039;拡張に 義解 ファイル アップロードが 中止されました.&#039;;break;
	}
}</pre>

JSON 形態は ajax ファイル アップロードに 使えば なる ので, そのまま 画面に 振り撤く のは 用途を 多様に 使う 数 ある のだ.

上に 見れば 間違い コードに 5番(回)が ない. 私が 漏らした 蟹 なくて 元々 ない の ようだ. 理由は 中 捜してみた.

<a href="http://php.net/manual/kr/features.file-upload.errors.php" target="_blank">php.net義 間違い コード 説明</a>を 参考すれば 良い のだ.

さて, 上 エラー ハンドリングは PHP 4.3から 導入した の ようだ. php.netを 参考すれば そうに 使って ある よう. 英語 走って 確信は できない.

エラー コード 6番(回)は 4.3.10科 5.0.3で 導入した の ようで, 7番(回)は 5.1.0で 導入した よう.

8番(回) エラーは 5.2.0で 導入した の ようなのに, 翻訳が 寝る 中 なる. PHP 拡張が アップロードを 止めらせた 位 なる の ようなのに なにか.