---
title: '[ワードプレス]既定のコンテンツフォーマット関数 &#8211; the_contentフィルター通さずthe_content効果賭け'
author: 녹풍(綠風, Windgreen)
layout: post
permalink: /archives/1922
categories:
  - WordPress
tags:
  - WordPress Tip
---
これなんと表現すればよいか分からないのにとにかく間、既定のコンテンツフォーマット関数と大まかに書いてみた。彼だから何だったら&#8230;各種プラグインが`the_content()`に触れる前純粋な`the_content()`を言うのだ。

例えば、ポップアップを浮かべるとしよう。内容を入力し、最初の画面に浮かべてたい。ところが、改行したのはpで包みたい、SNSのボタンのプラグインが付けたSNSボタンは群れてしまいたい。どうすればいい？ `the_content`フィルターを通過させると、SNSボタンがついてしまって、通過させなければ改行がされない！改行だけではない。二重引用符もまともに表現されておらず、ワードプレスが提供するContent Formattingに関連したいくつかの効果を適切に使用することができなくなる。 SNSボタンのプラグインのために！

方法がある。ワードプレスは、Open Sourceお前検索をした。 `the_content`にファイル全体を検索したのだ。だから、`the_content`フィルターにデフォルト設定されている関数を見つけることができた。(ワードプレス3.5の基準`wp-includes/default-filters.php`ファイルの135行)そうだ。これらの関数をそのままずっと書いてくれれば良いのだ。

以下のコードのように書いてくれれば良い。

<pre>$popover_content = wptexturize($popover_content);
$popover_content = convert_smilies($popover_content);
$popover_content = convert_chars($popover_content);
$popover_content = wpautop($popover_content);
$popover_content = shortcode_unautop($popover_content);
$popover_content = prepend_attachment($popover_content);
echo $popover_content;</pre>

各関数の説明は、ワードプレスのコードを開けてみれば出てくる。 Eclipseでコードジャンプします。私気になったのは、単純な改行を`br`と`p`タグに変更してくれることだったが、その関数は`wpautop()`であった。 `wptexturize()`は、`'`と`"`を`‘`、`’`と`“`、`”`に変えてくれる関数です。

まあ、この程度なら溶融だろう？