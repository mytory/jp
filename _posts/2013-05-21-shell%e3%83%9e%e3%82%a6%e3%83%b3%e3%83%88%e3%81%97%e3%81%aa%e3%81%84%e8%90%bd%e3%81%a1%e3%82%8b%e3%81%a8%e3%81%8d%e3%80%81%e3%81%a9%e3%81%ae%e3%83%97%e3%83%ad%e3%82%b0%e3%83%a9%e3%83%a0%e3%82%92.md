---
title: '[shell]マウントしない落ちるとき、どのプログラムを持っているのか確認して見る'
author: 녹풍(綠風, Windgreen)
layout: post
permalink: /archives/2048
categories:
  - Web server
tags:
  - shell
---
USBのようなものをマウントしてない抜ける場合があります。他のプログラムがUSBに何かを使用しているため起こる現象である。

例えば、USBの記事をいくつかのプログラムが開いた状態とかそのような場合ではない抜けるのだ。

![マックでマウントしてない抜ける場合][1]

上の画像は、Macで撮ったスクリーンショットですが、Linuxも同様のメッセージが出てくる。

Windows環境なら、どのようなプログラムをすべてオフに見なければならなくて、他の方法があるのか​​分からないが、とにかく大間でのMacやLinuxの場合は、ターミナルで次のコマンドを入力して終了する必要があるプログラムを確認することができる。

    lsof +D /mount-point

lsofはlist open filesの略です。  
例えば、私はUSB名前がMYUSBであった。その後、マックでは、次のように書いてくれれば良い。

    lsof +D /Volumes/YAN

マックは`/Volumes`という名前のフォルダに外部ストレージデバイスがマウントされることが分かれば簡単である。 Ubuntuのような場合には外部ストレージデバイスが`/media`にマウントされるので、同じ型で見つけてくれればなるだろう。

上記のコマンドを打つと以下のように出てくる。

    COMMAND     PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
    Sublime   15570 mytory  cwd    DIR    1,4    16384    1 /Volumes/YAN
    Finder    39170 mytory   20r   DIR    1,4    16384    1 /Volumes/YAN

ファインダーは、エクスプローラと終了する必要はありません。 Sublimeが終了してくれれば良い。まあ、世話を終了する必要がありだろうが、このようにPIDを使って終了することもできる。

    sudo kill 15570

このようにすると、マウントを解除することができる。

 [1]: http://dl.dropboxusercontent.com/u/15546257/blog/mytory/cant-umount.png