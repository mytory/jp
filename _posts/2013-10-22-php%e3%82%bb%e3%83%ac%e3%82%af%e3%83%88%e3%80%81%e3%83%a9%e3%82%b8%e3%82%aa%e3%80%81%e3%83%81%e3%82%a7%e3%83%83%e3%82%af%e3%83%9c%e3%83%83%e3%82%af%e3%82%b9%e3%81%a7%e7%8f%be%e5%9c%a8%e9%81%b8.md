---
title: '[PHP]セレクト、ラジオ、チェックボックスで現在選択されて奴を楽にチェックするようにしてくれる関数'
author: 녹풍(綠風, Windgreen)
layout: post
permalink: /archives/2221
mytory_markdown_html:
  - |
    |
        <p><code>checkbox</code>나 <code>radio</code>, <code>select</code> 폼 코딩을 할 때 귀찮고 코드가 길어지는 게 수정할 때다. 현재 DB에 들어있는 값을 선택된 상태로 수정 화면을 출력해 줘야 하기 때문이다.</p>
        
        <p>내가 만든 <code>if_checked()</code>와 <code>if_selected()</code> 함수를 사용하면 상대적으로 편해진다.</p>
        
        <h2>사용법</h2>
        
        <pre><code>&lt;?php if_selected($input_value, $db_value); ?&gt;
        &lt;?php if_checked($input_value, $db_value); ?&gt;
        </code></pre>
        
        <p>아래는 사용 예시다.</p>
        
        <pre><code>&lt;select name="회원구분"&gt;
            &lt;option value="정회원" &lt;?php if_selected('정회원', $row[회원구분])?&gt;&gt;&lt;/option&gt;
            &lt;option value="준회원" &lt;?php if_selected('준회원', $row[회원구분])?&gt;&gt;&lt;/option&gt;
        &lt;/select&gt;
        </code></pre>
        
        <p><code>if_selected()</code>와 <code>if_checked()</code> 함수 모두 사용법이 같다. 출력해 주는 값이 <code>selected</code>냐 <code>checked</code>냐 하는 차이만 있다.</p>
        
        <h2>파라미터</h2>
        
        <ul>
        <li><strong><code>$input_value</code></strong><br />
        (string) (required) 현재 <code>option</code>이나 <code>radio</code>, <code>checkbox</code>의 값.</li>
        <li><strong><code>$db_value</code></strong><br />
        (string|array) (required) DB에 들어있는 값. 복수선택된 <code>checkbox</code>인 경우엔 값을 배열로 넘기면 된다.</li>
        </ul>
        
        <h2>함수 코드</h2>
        
        <pre><code class="php">/**
         * input:checkbox나 input:radio 에서 값을 비교해 checked를 출력.
         * @param  string       $input_value 현재 input의 value
         * @param  string|array $db_value DB에 저장된 값 혹은 값들의 배열
         * @return boolean
         */
        function if_checked($input_value, $db_value){
          if(if_equal_or_in($input_value, $db_value)){
            echo 'checked';
          }
        }
        
        /**
         * selectbox 에서 값을 비교해 checked를 출력.
         * @param  string       $input_value 현재 select &gt; option의 value
         * @param  string|array $db_value DB에 저장된 값 혹은 값들의 배열
         * @return boolean
         */
        function if_selected($input_value, $db_value){
          if(if_equal_or_in($input_value, $db_value)){
            echo 'selected';
          }
        }
        
        /**
         * input:checkbox, input:radio, select 에서, 현재 값을 표시해 줄 때, 현재 값이 저장된 값과 같은지 
         * 혹은 저장된 값들 중에 포함돼 있는지(checkbox의 경우) 확인하는 함수.
         * HTML 길이를 줄이기 위해 만든 거다.
         * @param  string       $input_value 현재 input의 value
         * @param  string|array $db_value DB에 저장된 값 혹은 값들의 배열
         * @return boolean
         */
        function if_equal_or_in($input_value, $db_value){
          if(is_array($db_value)){
            return in_array($input_value, $db_value);
          }else{
            return $input_value == $db_value;
          }
        }
        </code></pre>
        
mytory_md_path:
  - http://dl.dropboxusercontent.com/u/15546257/mytory-md-content/if-selected--ja.md
categories:
  - Web publishing
  - Web server
tags:
  - PHP
---
`checkbox`や`radio`、`select`フォームのコーディングをするときに面倒でコードが長くなるのが修正時だ。現在のDBに入っている値を選択した状態で編集画面を出力しなければならないからだ。

私が作った`if_checked()`と`if_selected()`関数を使用すると、相対的に楽になる。

## 使い方

    <?php if_selected($form_value, $db_value); ?>
    <?php if_checked($form_value, $db_value); ?>
    

以下は使用例です。

    <select name="会員区分">
        <option value="正会員" <?php if_selected('正会員', $row[会員区分])?>></option>
        <option value="準会員" <?php if_selected('準会員', $row[会員区分])?>></option>
    </select>
    

`if_selected()`と`if_checked()`関数を使用法がある。出力する値が`selected`か`checked`なのかという違いがある。

## パラメータ

*   **`$form_value`**  
      (string)(required)現在の`option`や`radio`、`checkbox`の値。
*   **`$db_value`**  
      (string | array)(required)DBに入っている値。複数選択された`checkbox`である場合には値を配列として渡せばされる。

## 関数コード

<pre><code class="php">/**
 * input:checkboxやinput:radioの値を比較してcheckedを出力します。
 * @param string $form_value 現在のinputのvalue
 * @param string | array $db_value DBに保存された値または値の配列
 * @return boolean
 */
function if_checked($form_value, $db_value){
  if(if_equal_or_in($form_value, $db_value)){
    echo 'checked';
  }
}

/**
 * selectboxの値を比較してcheckedを出力します。
 * @param string $form_value現在select &gt; optionのvalue
 * @param string | array $db_value DBに保存された値または値の配列
 * @return boolean
 */
function if_selected($form_value, $db_value){
  if(if_equal_or_in($form_value, $db_value)){
    echo 'selected';
  }
}

/**
 * input:checkbox 、 input:radio 、 selectで、現在の値を表示して与えられたとき、現在の値が格納される値と同じである
 *あるいは保存された値の中に含まれているか(checkboxの場合)を確認する機能。
 * HTMLの長さを減らすために作ったのだ。
 * @param string $form_value現在のinputのvalue
 * @param string | array $db_value DBに保存された値または値の配列
 * @return boolean
 */
function if_equal_or_in($form_value, $db_value){
  if(is_array($db_value)){
    return in_array($form_value, $db_value);
  }else{
    return $form_value == $db_value;
  }
}
</code></pre>