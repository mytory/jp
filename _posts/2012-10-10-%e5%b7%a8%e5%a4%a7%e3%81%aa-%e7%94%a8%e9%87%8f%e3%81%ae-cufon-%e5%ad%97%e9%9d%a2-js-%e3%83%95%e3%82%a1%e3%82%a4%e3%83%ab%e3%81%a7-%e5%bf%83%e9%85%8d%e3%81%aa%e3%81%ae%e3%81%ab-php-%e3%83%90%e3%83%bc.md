---
title: 巨大な 用量の Cufon 字面 js ファイルで 心配なのに php バージョンが 低くて minifyを 使うの できない 人を ための 便法
author: 녹풍(綠風, Windgreen)
layout: post
permalink: /archives/588
aktt_notify_twitter:
  - yes
categories:
  - Web server
tags:
  - PHP
---
今日, 作業中の ウェブサイトに [Cufon][1]で 分けゴシックを <a target="_top" href="http://hhomm.com/hhomm_356">適用</a>した. ところが どうこうでも 1.3メガバイトや なる <a target="_top" href="http://hhomm.com/hhomm_367">分けゴシック Cufon</a>銀 トラフィックに 負担. そのため minify ライブラリを 利用して 圧縮 送信を 試みた. 結果は 挫折.

私が 作業する サーバーは PHP4であったが <a target="_top" href="http://code.google.com/p/minify/">minify ライブラリ</a>義 最小 遠慮は 5.1.6引き継いだ の! こういう くそ. それでは 放棄?

家に 帰って来てから びっくり アイディアが 浮び上がった.

サーバーに 部下は まどろみ くれるが トラフィック 部下よりは ましなの! する 考えで 思い浮かんだ アイディア.

一応 NanumGothic.php ファイルを 作って, NanumGothic.js に ある 内容を 皆 コピーする.

ファイル 用量が 1.3メガバイトや なったら メモ帳 なんかでは 熱 数 ない. ドリームウィーバや 李クリップスドー 苦しがる ことだ. エディットプラスが 最高だ.

刺字, コピーを したら, NanumGothic.php マン 上に そのまま 下と 一緒に 少なくて 与える.

<pre>&lt;?ob_start("ob_gzhandler");?&gt;</pre>

それでは <a target="_top" href="http://www.php.net/manual/kr/function.ob-gzhandler.php">php街 分かって 自分を 圧縮</a>する.

そして 下側に NanumGothic.js 義 内容 全体を 付けて 入れる.(勿論 `echo file_get_contents('NanumGothic.js');` ような ことで 処理しても なる.

付けて 入れて 保存する 時 &#8220;エンコード 違う こと ゴルセム&#8221; 何 こういう 案内文 浮かぶのに 無視しなさい. 違う こと ゴルジ ないでねと言う 言葉だ. そのまま 保存しなさい.

そして Cufonを 使うと する 所で, 下のように 呼んで来れば すごい.

<pre>&lt;script type="text/javascript" src="NanumGothic.php"&gt;&lt;/script&gt;</pre>

あんな 式で 使う 首都 ある ことだ.

<a target="_top" href="http://www.whatsmyip.org/http_compression/">Web Page Content Compression Verification</a> に 行って 検事を 日 見れば 圧縮されたと 出る のを 確認する 数 あって, また 作動も 寝る なる のを ボール 数 ある. 万歳!

私が 例示は Cufonで 入ったが これ 方法を 使えば 多様な 応用を 割 数 ある.

勿論 これ 方法は 限界が ある. たいてい ファイルだけ 圧縮する 数 あるという ことだ. しかし 大容量 ファイル 一つを 確実に 寝かせる 数 あるという 長所は ある. そして あんな 方式で 初めから 変数を 受けて 出力して 捨てる php ファイルを 万たち 首都 ある のだ.

## あらゆる jsわ css 圧縮して 出す スクリプト 作り

定木, たいてい 番(回) アイディアを 具現して 見よう.

まず 下と ような php ファイルを 作る. 経路は 便宜上 /php-lib/gzip.php 路 欠点.

<pre class="brush:php">ob_start("ob_gzhandler");
echo file_get_contents($_SERVER[&#039;DOCUMENT_ROOT&#039;] . $_GET[&#039;f&#039;]);</pre>

こんなに 作って, 最上位 経路に ある `.htaccess` ファイルを 開く.

そして そこに これ たいてい 竝びを 入れて 与える.

<pre>RewriteRule ^(.*[^wp-admin].(css|js))$ /php-lib/gzip.php?f=$1 [L]</pre>

それでは あらゆる のが 成功的に 完了する.

<a target="_top" href="http://www.whatsmyip.org/http_compression/">ウェプページが 圧縮されたのか 検事</a>日 見れば 寝る なって ある のを 確認する 数 ある.

こんなに すれば 敢えて src=&#8221;/php-lib/gzip.php?f=jquery.js&#8221; こういう 式で 少なくて 主旨 なくても .htaccess 街 \*.js, \*.css路 入って来た 要請を 分かって gzip.php に 通過させる.

団, 上 方法が 保安上 どうな 問題を 生むか 私は 寝る 分からない.

 [1]: https://github.com/sorccu/cufon/wiki/