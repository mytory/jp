---
title: 'PHP バグ? セッション 変数 値段を 一般 変数が 覆って 使う 問題 &#8211; 多分 register_globals だからである よう'
author: 녹풍(綠風, Windgreen)
layout: post
permalink: /archives/550
aktt_notify_twitter:
  - yes
categories:
  - Web server
tags:
  - PHP
---
<div style="width: 410px" class="wp-caption aligncenter">
  <img src="http://dl.dropboxusercontent.com/u/15546257/blog/mytory/old-images/1/cfile2.uf.19425A4E4D4BC96D321E28.png" alt="" filename="cfile2.uf.19425A4E4D4BC96D321E28.png" filemime="" height="210" width="400" /><p class="wp-caption-text">
    △ PHP, 緩くて 学ぶこと 易しいが あれほど 自分勝手に 作動する 場合も たびたび ある の ようだ.
  </p>
</div>

今日 あっけない 現象を 見つけた. 環境は PHP&nbsp;5.2.8 引き継いだし, `register_globals = On` 引き継いだ.

`register_globals = Off`イン 場合には こういう 問題が 発生するの ない ようだ.

今日 使用者 情報を セッションに 保存してから 終わり ページに 行って 振り撤いてくれる ページを 具現して あった. 

<pre class="brush:php">session_start();
echo &#039;&lt;pre&gt;&#039;;
$_SESSION[&#039;foo&#039;] = &#039;セッション プ&#039;;
$foo = &#039;そのまま プ&#039;;
echo "セッション 青い 取って 見よう : ".$_SESSION[&#039;foo&#039;];
echo "n";
echo "そのまま 青い 取って 見よう : ".$foo;
echo "n";
echo &#039;&lt;/pre&gt;&#039;;
</pre>

上 例題を 見れば まどろみ コンパニオン なる のだと 見る.

どうな 結果が 出る ことと 予想するか? 当然 下と ような 結果が 論理的だ.</p> 

<pre class="brush:plain">セッション 青い 取って 見よう : セッション プ
そのまま 青い 取って 見よう : そのまま プ
</pre>

セッションに 初め 変数を 割り当てした 時の 画面は 上と 一緒に 正常に 出る.

ところが F5を 押したら? 下と 一緒に 出る.

<pre class="brush:plain">セッション 青い 取って 見よう : そのまま プ
そのまま 青い 取って 見よう : そのまま プ
</pre>

すなわち, そのまま 変数の 内容が セッション 変数を 覆って 使いつくす のだった. 

完全 荒唐 彼 自体だった.

これを 悟るの できなかった だから, 私は 代替 どこで 情報が 遺失された ことなの しながら しばらくを 捜すと した.

蟹に 私の ローカル テスト 環境は `register_globals = Off`であった だから, ローカルで あらゆる テストを 終えて サーバーに ファイルを あげてから 狼狽を 見ると した.

これは いったい 何 問題 だからなのか 説明 可能な 分 ないか 知りたい.

ヨトンガンに `register_globals = On` イン 場合 SESSION 変数を 使う 時 気を付けよう. SESSION 変数と 名前が ような 変数人を 使えば SESSION 情報が 飛んで 捨てる 首都 ある. はなはだしくは 環境に したがって 選択的に 言葉だ.